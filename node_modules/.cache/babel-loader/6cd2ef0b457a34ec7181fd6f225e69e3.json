{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.applyStylesheets = exports.renderElements = exports.renderElement = exports.bucketElements = exports.hasBlockContent = void 0;\n\nconst react_1 = __importDefault(require(\"react\"));\n\nconst renderers_1 = __importStar(require(\"./renderers\"));\n\nconst renderer_1 = require(\"@react-pdf/renderer\");\n\nconst parse_1 = __importDefault(require(\"./parse\"));\n\nconst styles_1 = require(\"./styles\");\n\nconst tags_1 = require(\"./tags\");\n\nconst convertEntities = input => {\n  const entities = [['amp', '&'], ['apos', \"'\"], ['#x27', \"'\"], ['#x2F', '/'], ['#39', \"'\"], ['#47', '/'], ['lt', '<'], ['gt', '>'], ['nbsp', ' '], ['quot', '\"']];\n  let text = input;\n\n  for (let entity of entities) {\n    text = text.replace(new RegExp('&' + entity[0] + ';', 'g'), entity[1]);\n  }\n\n  return text;\n};\n\nconst hasBlockContent = element => {\n  if (typeof element === 'string') {\n    return false;\n  }\n\n  if (tags_1.isBlock[element.tag]) {\n    return true;\n  }\n\n  if (element.content) {\n    return !!element.content.find(exports.hasBlockContent);\n  }\n\n  return false;\n};\n\nexports.hasBlockContent = hasBlockContent;\n\nconst ltrim = text => text.replace(/^\\s+/, '');\n\nconst rtrim = text => text.replace(/\\s+$/, '');\n/**\n * Groups all block and non-block elements into buckets so that all non-block elements can be rendered in a parent Text element\n * @param elements Elements to place in buckets of block and non-block content\n * @param collapse\n * @param parentTag\n */\n\n\nconst bucketElements = (elements, collapse, parentTag) => {\n  let bucket;\n  let hasBlock;\n  const buckets = [];\n  elements.forEach((element, index) => {\n    // clear empty strings between block elements\n    if (typeof element === 'string') {\n      if (parentTag === 'pre') {\n        if (element[0] === '\\n') {\n          element = element.substr(1);\n        }\n\n        if (element[element.length - 1] === '\\n') {\n          element = element.substr(0, element.length - 1);\n        }\n      } else {\n        if (collapse && (hasBlock || hasBlock === undefined)) {\n          element = ltrim(element);\n        }\n\n        const next = elements[index + 1];\n\n        if (collapse && next && (0, exports.hasBlockContent)(next)) {\n          element = rtrim(element);\n        }\n      }\n\n      if (element === '') {\n        return;\n      }\n    }\n\n    const block = (0, exports.hasBlockContent)(element);\n\n    if (block !== hasBlock) {\n      hasBlock = block;\n      bucket = {\n        hasBlock,\n        content: []\n      };\n      buckets.push(bucket);\n    }\n\n    bucket.content.push(element);\n  });\n  return buckets;\n};\n\nexports.bucketElements = bucketElements;\n\nconst renderElement = (element, stylesheets, renderers, children, index) => {\n  if (typeof element === 'string') {\n    element = convertEntities(element);\n\n    if (/(\\s )|( \\s)/.test(element)) {\n      // hack to avoid collapsing sequential spaces\n      return element.split(/(\\s{2,})/g).reduce((strings, string, index) => string === '' ? strings : strings.concat(index % 2 ? string.split('') : string), []);\n    }\n\n    return element;\n  }\n\n  let Element = renderers[element.tag];\n\n  if (!Element) {\n    if (!(element.tag in tags_1.isBlock)) {\n      // Unknown element, do nothing\n      console.warn(`Excluding \"${element.tag}\" because it has no renderer`);\n      Element = renderers_1.renderNoop;\n    } else {\n      Element = (0, exports.hasBlockContent)(element) ? renderers_1.renderBlock : renderers_1.renderInline;\n    }\n  }\n\n  return react_1.default.createElement(Element, {\n    key: index,\n    style: element.style,\n    children: children,\n    element: element,\n    stylesheets: stylesheets\n  });\n};\n\nexports.renderElement = renderElement;\n\nconst collapseWhitespace = string => string.replace(/(\\s+)/g, ' ');\n\nconst renderElements = (elements, options, parentTag) => {\n  const buckets = (0, exports.bucketElements)(elements, options.collapse, parentTag);\n  return buckets.map((bucket, bucketIndex) => {\n    const rendered = bucket.content.map((element, index) => {\n      if (typeof element === 'string') {\n        if (options.collapse) {\n          element = collapseWhitespace(element);\n        }\n\n        return (0, exports.renderElement)(element, options.stylesheets, options.renderers, undefined, index);\n      }\n\n      return (0, exports.renderElement)(element, options.stylesheets, options.renderers, (0, exports.renderElements)(element.content, element.tag === 'pre' ? Object.assign(Object.assign({}, options), {\n        collapse: false\n      }) : options, element.tag), index);\n    });\n    const parentIsBlock = parentTag && tags_1.isBlock[parentTag] === false;\n    return bucket.hasBlock || parentIsBlock ? react_1.default.createElement(react_1.default.Fragment, {\n      key: bucketIndex\n    }, rendered) : react_1.default.createElement(renderer_1.Text, {\n      key: bucketIndex\n    }, rendered);\n  });\n};\n\nexports.renderElements = renderElements;\n\nconst applyStylesheets = (stylesheets, rootElement) => {\n  stylesheets.forEach(stylesheet => {\n    for (const selector of Object.keys(stylesheet)) {\n      const elements = rootElement.querySelectorAll(selector);\n      elements.forEach(element => {\n        element.style.push(stylesheet[selector]);\n      });\n    }\n  });\n};\n\nexports.applyStylesheets = applyStylesheets;\n\nconst renderHtml = (text, options) => {\n  const defaultFontSize = 18;\n  const fontSizeStyle = {\n    fontSize: defaultFontSize\n  };\n  const styles = options.style ? Array.isArray(options.style) ? options.style : [options.style] : [];\n  styles.forEach(style => {\n    if (!style) {\n      return;\n    }\n\n    if (typeof style.fontSize === 'number') {\n      fontSizeStyle.fontSize = style.fontSize;\n    }\n\n    if (typeof style.fontSize === 'string' && style.fontSize.endsWith('px')) {\n      fontSizeStyle.fontSize = parseInt(style.fontSize, 10);\n    }\n  });\n  const baseStyles = (0, styles_1.createHtmlStylesheet)(fontSizeStyle.fontSize, options.resetStyles);\n  const parsed = (0, parse_1.default)(text);\n  const stylesheets = options.stylesheet ? Array.isArray(options.stylesheet) ? options.stylesheet : [options.stylesheet] : [];\n  const opts = Object.assign(Object.assign({\n    collapse: true,\n    resetStyles: false\n  }, options), {\n    renderers: Object.assign(Object.assign({}, renderers_1.default), options.renderers),\n    stylesheets: [baseStyles, ...stylesheets, ...parsed.stylesheets]\n  });\n  (0, exports.applyStylesheets)(opts.stylesheets, parsed.rootElement);\n  return react_1.default.createElement(renderer_1.View, {\n    style: Object.assign(Object.assign({}, styles), fontSizeStyle)\n  }, (0, exports.renderElements)(parsed.rootElement.content, opts));\n};\n\nexports.default = renderHtml;","map":{"version":3,"sources":["/Users/macbook/Documents/GitHub/React 3/billing-app/node_modules/react-pdf-html/dist/render.js"],"names":["__createBinding","Object","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__setModuleDefault","v","value","__importStar","mod","__esModule","result","prototype","hasOwnProperty","call","__importDefault","exports","applyStylesheets","renderElements","renderElement","bucketElements","hasBlockContent","react_1","require","renderers_1","renderer_1","parse_1","styles_1","tags_1","convertEntities","input","entities","text","entity","replace","RegExp","element","isBlock","tag","content","find","ltrim","rtrim","elements","collapse","parentTag","bucket","hasBlock","buckets","forEach","index","substr","length","next","block","push","stylesheets","renderers","children","test","split","reduce","strings","string","concat","Element","console","warn","renderNoop","renderBlock","renderInline","default","createElement","key","style","collapseWhitespace","options","map","bucketIndex","rendered","assign","parentIsBlock","Fragment","Text","rootElement","stylesheet","selector","keys","querySelectorAll","renderHtml","defaultFontSize","fontSizeStyle","fontSize","styles","Array","isArray","endsWith","parseInt","baseStyles","createHtmlStylesheet","resetStyles","parsed","opts","View"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.applyStylesheets = exports.renderElements = exports.renderElement = exports.bucketElements = exports.hasBlockContent = void 0;\nconst react_1 = __importDefault(require(\"react\"));\nconst renderers_1 = __importStar(require(\"./renderers\"));\nconst renderer_1 = require(\"@react-pdf/renderer\");\nconst parse_1 = __importDefault(require(\"./parse\"));\nconst styles_1 = require(\"./styles\");\nconst tags_1 = require(\"./tags\");\nconst convertEntities = (input) => {\n    const entities = [\n        ['amp', '&'],\n        ['apos', \"'\"],\n        ['#x27', \"'\"],\n        ['#x2F', '/'],\n        ['#39', \"'\"],\n        ['#47', '/'],\n        ['lt', '<'],\n        ['gt', '>'],\n        ['nbsp', ' '],\n        ['quot', '\"'],\n    ];\n    let text = input;\n    for (let entity of entities) {\n        text = text.replace(new RegExp('&' + entity[0] + ';', 'g'), entity[1]);\n    }\n    return text;\n};\nconst hasBlockContent = (element) => {\n    if (typeof element === 'string') {\n        return false;\n    }\n    if (tags_1.isBlock[element.tag]) {\n        return true;\n    }\n    if (element.content) {\n        return !!element.content.find(exports.hasBlockContent);\n    }\n    return false;\n};\nexports.hasBlockContent = hasBlockContent;\nconst ltrim = (text) => text.replace(/^\\s+/, '');\nconst rtrim = (text) => text.replace(/\\s+$/, '');\n/**\n * Groups all block and non-block elements into buckets so that all non-block elements can be rendered in a parent Text element\n * @param elements Elements to place in buckets of block and non-block content\n * @param collapse\n * @param parentTag\n */\nconst bucketElements = (elements, collapse, parentTag) => {\n    let bucket;\n    let hasBlock;\n    const buckets = [];\n    elements.forEach((element, index) => {\n        // clear empty strings between block elements\n        if (typeof element === 'string') {\n            if (parentTag === 'pre') {\n                if (element[0] === '\\n') {\n                    element = element.substr(1);\n                }\n                if (element[element.length - 1] === '\\n') {\n                    element = element.substr(0, element.length - 1);\n                }\n            }\n            else {\n                if (collapse && (hasBlock || hasBlock === undefined)) {\n                    element = ltrim(element);\n                }\n                const next = elements[index + 1];\n                if (collapse && next && (0, exports.hasBlockContent)(next)) {\n                    element = rtrim(element);\n                }\n            }\n            if (element === '') {\n                return;\n            }\n        }\n        const block = (0, exports.hasBlockContent)(element);\n        if (block !== hasBlock) {\n            hasBlock = block;\n            bucket = {\n                hasBlock,\n                content: [],\n            };\n            buckets.push(bucket);\n        }\n        bucket.content.push(element);\n    });\n    return buckets;\n};\nexports.bucketElements = bucketElements;\nconst renderElement = (element, stylesheets, renderers, children, index) => {\n    if (typeof element === 'string') {\n        element = convertEntities(element);\n        if (/(\\s )|( \\s)/.test(element)) {\n            // hack to avoid collapsing sequential spaces\n            return element\n                .split(/(\\s{2,})/g)\n                .reduce((strings, string, index) => string === ''\n                ? strings\n                : strings.concat(index % 2 ? string.split('') : string), []);\n        }\n        return element;\n    }\n    let Element = renderers[element.tag];\n    if (!Element) {\n        if (!(element.tag in tags_1.isBlock)) {\n            // Unknown element, do nothing\n            console.warn(`Excluding \"${element.tag}\" because it has no renderer`);\n            Element = renderers_1.renderNoop;\n        }\n        else {\n            Element = (0, exports.hasBlockContent)(element) ? renderers_1.renderBlock : renderers_1.renderInline;\n        }\n    }\n    return (react_1.default.createElement(Element, { key: index, style: element.style, children: children, element: element, stylesheets: stylesheets }));\n};\nexports.renderElement = renderElement;\nconst collapseWhitespace = (string) => string.replace(/(\\s+)/g, ' ');\nconst renderElements = (elements, options, parentTag) => {\n    const buckets = (0, exports.bucketElements)(elements, options.collapse, parentTag);\n    return buckets.map((bucket, bucketIndex) => {\n        const rendered = bucket.content.map((element, index) => {\n            if (typeof element === 'string') {\n                if (options.collapse) {\n                    element = collapseWhitespace(element);\n                }\n                return (0, exports.renderElement)(element, options.stylesheets, options.renderers, undefined, index);\n            }\n            return (0, exports.renderElement)(element, options.stylesheets, options.renderers, (0, exports.renderElements)(element.content, element.tag === 'pre' ? Object.assign(Object.assign({}, options), { collapse: false }) : options, element.tag), index);\n        });\n        const parentIsBlock = parentTag && tags_1.isBlock[parentTag] === false;\n        return bucket.hasBlock || parentIsBlock ? (react_1.default.createElement(react_1.default.Fragment, { key: bucketIndex }, rendered)) : (react_1.default.createElement(renderer_1.Text, { key: bucketIndex }, rendered));\n    });\n};\nexports.renderElements = renderElements;\nconst applyStylesheets = (stylesheets, rootElement) => {\n    stylesheets.forEach((stylesheet) => {\n        for (const selector of Object.keys(stylesheet)) {\n            const elements = rootElement.querySelectorAll(selector);\n            elements.forEach((element) => {\n                element.style.push(stylesheet[selector]);\n            });\n        }\n    });\n};\nexports.applyStylesheets = applyStylesheets;\nconst renderHtml = (text, options) => {\n    const defaultFontSize = 18;\n    const fontSizeStyle = { fontSize: defaultFontSize };\n    const styles = options.style\n        ? Array.isArray(options.style)\n            ? options.style\n            : [options.style]\n        : [];\n    styles.forEach((style) => {\n        if (!style) {\n            return;\n        }\n        if (typeof style.fontSize === 'number') {\n            fontSizeStyle.fontSize = style.fontSize;\n        }\n        if (typeof style.fontSize === 'string' && style.fontSize.endsWith('px')) {\n            fontSizeStyle.fontSize = parseInt(style.fontSize, 10);\n        }\n    });\n    const baseStyles = (0, styles_1.createHtmlStylesheet)(fontSizeStyle.fontSize, options.resetStyles);\n    const parsed = (0, parse_1.default)(text);\n    const stylesheets = options.stylesheet\n        ? Array.isArray(options.stylesheet)\n            ? options.stylesheet\n            : [options.stylesheet]\n        : [];\n    const opts = Object.assign(Object.assign({ collapse: true, resetStyles: false }, options), { renderers: Object.assign(Object.assign({}, renderers_1.default), options.renderers), stylesheets: [baseStyles, ...stylesheets, ...parsed.stylesheets] });\n    (0, exports.applyStylesheets)(opts.stylesheets, parsed.rootElement);\n    return (react_1.default.createElement(renderer_1.View, { style: Object.assign(Object.assign({}, styles), fontSizeStyle) }, (0, exports.renderElements)(parsed.rootElement.content, opts)));\n};\nexports.default = renderHtml;\n//# sourceMappingURL=render.js.map"]},"metadata":{},"sourceType":"script"}